# 📜 실행 로그(자유 형식)
- 날짜: 2025-09-07 / 한 일: 가시성제어위젯 성능비교 실험 / 메모: 각각의 실험을 2회씩 반복한다.

<br /><br />

# 📊 현재 상태/결과 요약
## 보이지 않는 상태에서 부모 위젯의 갱신
### 작은 크기의 위젯  
<img width="665" height="224" alt="스크린샷 2025-09-07 오후 3 04 49" src="https://github.com/user-attachments/assets/dfcff45e-d866-4a5d-83af-b13b4c9499a8" />

| 방법 | Run | 프레임 | 평균(ms) | p95(ms) | 최대(ms) | 최소(ms) | Missed | Missed(%) | 예산(ms) |
|---|:--:|---:|---:|---:|---:|---:|---:|---:|---:|
| Offstage | 1 | 1192 | 5.35 | 7.09 | 14.17 | 2.10 | 0 | 0.00 | 16.70 |
| Offstage | 2 | 1196 | 5.31 | 7.25 | 14.99 | 1.83 | 0 | 0.00 | 16.70 |
| Opacity | 1 | 1188 | 5.30 | 7.05 | 14.10 | 2.20 | 0 | 0.00 | 16.70 |
| Opacity | 2 | 1191 | 5.34 | 7.14 | 13.60 | 2.13 | 0 | 0.00 | 16.70 |
| Visibility | 1 | 1190 | 5.24 | 7.06 | 13.16 | 1.73 | 0 | 0.00 | 16.70 |
| Visibility | 2 | 1194 | 5.25 | 7.01 | 12.21 | 1.71 | 0 | 0.00 | 16.70 |
| if-else | 1 | 1196 | 5.23 | 7.00 | 8.52 | 1.92 | 0 | 0.00 | 16.70 |
| if-else | 2 | 1195 | 5.23 | 6.89 | 10.85 | 1.68 | 0 | 0.00 | 16.70 |

### 큰 크기의 위젯  
<img width="700" height="309" alt="스크린샷 2025-09-07 오후 2 54 23" src="https://github.com/user-attachments/assets/9bace003-3e6f-4f62-b351-b8773975ba7d" />

| 방법 | Run | 프레임 | 평균(ms) | p95(ms) | 최대(ms) | 최소(ms) | Missed | Missed(%) | 예산(ms) |
|---|:--:|---:|---:|---:|---:|---:|---:|---:|---:|
| Offstage | 1 | 1192 | 6.03 | 6.82 | 20.34 | 1.88 | 7 | 0.59 | 16.70 |
| Offstage | 2 | 1189 | 6.07 | 7.15 | 33.53 | 4.93 | 5 | 0.42 | 16.70 |
| Opacity | 1 | 1187 | 6.10 | 6.98 | 22.55 | 2.25 | 7 | 0.59 | 16.70 |
| Opacity | 2 | 1189 | 6.09 | 6.81 | 23.28 | 0.97 | 7 | 0.59 | 16.70 |
| Visibility | 1 | 1194 | 5.22 | 7.03 | 11.61 | 1.72 | 0 | 0.00 | 16.70 |
| Visibility | 2 | 1195 | 5.22 | 7.06 | 11.87 | 1.85 | 0 | 0.00 | 16.70 |
| if-else | 1 | 1193 | 5.26 | 6.96 | 11.78 | 1.81 | 0 | 0.00 | 16.70 |
| if-else | 2 | 1197 | 5.24 | 6.96 | 13.85 | 1.78 | 0 | 0.00 | 16.70 |

<br /><br />

## 가시성 토글 (ValueNotifier로 가시성 제어 위젯만 토글)
### 작은 크기의 위젯  
<img width="665" height="224" alt="스크린샷 2025-09-07 오후 3 04 49" src="https://github.com/user-attachments/assets/dfcff45e-d866-4a5d-83af-b13b4c9499a8" />

| 방법 | Run | 프레임 | 평균(ms) | p95(ms) | 최대(ms) | 최소(ms) | Missed | Missed(%) | 예산(ms) |
|---|:--:|---:|---:|---:|---:|---:|---:|---:|---:|
| Offstage | 1 | 1185 | 4.84 | 6.12 | 11.91 | 1.13 | 0 | 0.00 | 16.70 |
| Offstage | 2 | 1188 | 4.81 | 6.14 | 10.23 | 1.16 | 0 | 0.00 | 16.70 |
| Opacity | 1 | 1185 | 4.72 | 6.08 | 7.66 | 0.96 | 0 | 0.00 | 16.70 |
| Opacity | 2 | 1189 | 4.71 | 6.05 | 9.69 | 0.63 | 0 | 0.00 | 16.70 |
| Visibility | 1 | 1182 | 4.89 | 7.32 | 13.72 | 0.87 | 0 | 0.00 | 16.70 |
| Visibility | 2 | 1183 | 4.90 | 7.26 | 13.86 | 1.01 | 0 | 0.00 | 16.70 |
| if-else | 1 | 1183 | 4.88 | 7.37 | 13.98 | 0.94 | 0 | 0.00 | 16.70 |
| if-else | 2 | 1180 | 4.89 | 7.42 | 9.15 | 0.72 | 0 | 0.00 | 16.70 |

### 큰 크기의 위젯  
<img width="700" height="309" alt="스크린샷 2025-09-07 오후 2 54 23" src="https://github.com/user-attachments/assets/9bace003-3e6f-4f62-b351-b8773975ba7d" />

| 방법 | Run | 프레임 | 평균(ms) | p95(ms) | 최대(ms) | 최소(ms) | Missed | Missed(%) | 예산(ms) |
|---|:--:|---:|---:|---:|---:|---:|---:|---:|---:|
| Offstage | 1 | 1183 | 5.56 | 7.17 | 18.64 | 2.34 | 1 | 0.08 | 16.70 |
| Offstage | 2 | 1190 | 5.57 | 7.02 | 16.86 | 2.76 | 1 | 0.08 | 16.70 |
| Opacity | 1 | 1191 | 5.65 | 7.12 | 12.66 | 2.10 | 0 | 0.00 | 16.70 |
| Opacity | 2 | 1192 | 5.61 | 6.99 | 15.60 | 2.50 | 0 | 0.00 | 16.70 |
| Visibility | 1 | 1187 | 5.20 | 10.62 | 47.25 | 0.45 | 3 | 0.25 | 16.70 |
| Visibility | 2 | 1186 | 5.19 | 10.49 | 48.36 | 0.65 | 4 | 0.34 | 16.70 |
| if-else | 1 | 1185 | 5.16 | 10.42 | 49.78 | 0.46 | 3 | 0.25 | 16.70 |
| if-else | 2 | 1189 | 5.14 | 10.29 | 47.84 | 0.48 | 3 | 0.25 | 16.70 |


<br /><br /><br /><br />

  
# 🏙️ 스냅샷(표/그림/코드/데모 등, 설명 한 줄)
- None

<br /><br /><br /><br />

# 📖문제·수정·배운 점
- 예상한대로 Offstage, Opacity 는 가시성을 자주 토글하는 상황에서 더 유리했고, Visibility와 if-else 는 보이지 않는 상태에서 부모가 자주 갱신되는 상황에서 유리했음
  - 특히 가시성을 자주 토글하는 상황 + 큰 크기의 위젯에서 if-else 와 Visibility는 최대49.78 이라는 엄청난 정크를 일으킴
  - Offstage와 Opacity도 보이지 않는 상황 + 큰 크기의 위젯에서 Missed된 비율이 높게 나옴
- **S1_자료**에서 AI 리뷰에 나왔던 것 처럼 자체 가시성 토글 상황에서의 효율성이 Offstage가 Opacity 보다 우세하지 않았음, 아마도 보이지 않는 상황에서 Opacity는 본인의 사이즈를 그대로 유지하고 있는 반면 Offstage는 Size를 0으로 보고하는 것과 히트테스팅이 없어지냐 남아있냐의 차이로 인한것으로 예상됨
  - 자주 토글되면서 히트테스팅이나 레이아웃 같은것을 신경쓰지 않아도 되는 상황에서는 Opacity를 활용하는게 좋을것으로 생각됨
- 결론
  -  위젯 + “그냥 숨겨두기”(토글 거의 없음): Visibility(false) 또는 if (...) null 권장.
  -  큰 위젯 + “자주 토글” (보였다 숨겼다 반복): Opacity(0↔1) 또는 Offstage 권장.

## 👨‍🏫 AI 리뷰(답변)
### 결론 요약
- 드물게 토글 + 그냥 숨김: Visibility(false) 또는 if (...) null → 트리에서 빠져 레이아웃·페인트·히트테스트 비용 최소화.
- 자주 토글 + 큰 위젯: Opacity(0↔1) 또는 Offstage → p95/최대 스파이크 억제, 프레임 안정적.
= 주의사항: Opacity(0)는 터치가 살아있으니 필요 시 IgnorePointer 병행. Offstage는 레이아웃은 유지. Visibility/if-else는 토글 시 재마운트 비용 큼.
= 한 줄 판단: “토글이 잦으면 붙여두고 가리기(Opacity/Offstage), 드물면 아예 빼기(Visibility/if-else).”

### 총평
반복 측정과 p95·최대·Missed까지 포함한 지표 설계가 탄탄합니다. “숨김 유지 vs 토글”이라는 시나리오 분리도 탁월해 실무 적용성이 매우 높아요. 그래프·표 해석과 결론의 일관성도 좋아 “왜 이런 결과가 나왔는지”가 명확히 전달됩니다. 정말 잘하셨어요! 👍
