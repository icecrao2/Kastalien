# 실행 로그(자유 형식)
[ 날짜: 2025-09-13 / 한 일: shrinkWrap 유무 실험 / 메모: 각각의 실험을 3회씩 반복한다.

# 현재 상태/결과 요약
- 화면에 처음 빌드했을때 효율성 측정
  - 요소 10개
    - shrinkWrap: true
      - ```
        flutter: [PERF] frames=25 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.35/2.10/6.06/6.09 | raster[min/avg/p95/max]=0.08/0.31/0.55/0.60
        flutter: [PERF] frames=24 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.34/2.38/5.30/5.35 | raster[min/avg/p95/max]=0.09/0.35/0.58/0.62
        flutter: [PERF] frames=24 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.44/2.49/6.02/7.08 | raster[min/avg/p95/max]=0.11/0.35/0.56/0.58
        ```
    - shrinkWrap: false
      - ```
        flutter: [PERF] frames=25 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.34/2.24/5.59/6.15 | raster[min/avg/p95/max]=0.08/0.34/0.59/0.66
        flutter: [PERF] frames=24 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.34/2.07/5.88/6.67 | raster[min/avg/p95/max]=0.08/0.30/0.54/0.55
        flutter: [PERF] frames=25 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.33/2.44/6.48/7.34 | raster[min/avg/p95/max]=0.08/0.34/0.62/0.63
        ```
  - 요소 100개
    - shrinkWrap: true
      - ```
        flutter: [PERF] frames=24 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.43/2.14/4.97/5.94 | raster[min/avg/p95/max]=0.09/0.32/0.53/0.53
        flutter: [PERF] frames=24 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.48/2.92/5.78/6.20 | raster[min/avg/p95/max]=0.13/0.42/0.68/0.72
        flutter: [PERF] frames=24 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.46/2.63/5.34/7.28 | raster[min/avg/p95/max]=0.11/0.39/0.62/0.65
        ```
    - shrinkWrap: false
      - ```
        flutter: [PERF] frames=24 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.41/2.36/5.15/5.58 | raster[min/avg/p95/max]=0.09/0.37/0.61/0.65
        flutter: [PERF] frames=25 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.34/2.46/5.38/6.38 | raster[min/avg/p95/max]=0.08/0.33/0.54/0.59
        flutter: [PERF] frames=24 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.36/2.31/5.31/6.46 | raster[min/avg/p95/max]=0.10/0.36/0.60/0.63
        ```
  - 요소 1000개
    
    - shrinkWrap: true
      - ```
        flutter: [PERF] frames=25 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.39/2.26/5.74/6.13 | raster[min/avg/p95/max]=0.09/0.32/0.53/0.54
        flutter: [PERF] frames=25 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.33/2.20/6.61/6.79 | raster[min/avg/p95/max]=0.08/0.32/0.55/0.56
        flutter: [PERF] frames=24 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.36/2.22/5.65/6.34 | raster[min/avg/p95/max]=0.09/0.33/0.55/0.65
        ```
    - shrinkWrap: false
      - ```
        flutter: [PERF] frames=25 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.36/2.21/5.76/6.19 | raster[min/avg/p95/max]=0.09/0.33/0.58/0.61
        flutter: [PERF] frames=25 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.33/2.18/5.11/6.25 | raster[min/avg/p95/max]=0.09/0.34/0.56/0.64
        flutter: [PERF] frames=25 | jank=0 (0.00%, budget=16.67ms) | build[min/avg/p95/max]=0.32/2.30/6.21/6.92 | raster[min/avg/p95/max]=0.08/0.32/0.54/0.60
        ```
- 스크롤시 효율성 측정
  - 요소 100개
    - shrinkWrap: true
      - ```
        flutter: [PERF] frames=623 | jank=0 (0.00%) | build[min/avg/p95/max]=0.99/4.05/5.48/10.15 | raster[min/avg/p95/max]=0.15/0.51/0.70/0.89 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=620 | jank=0 (0.00%) | build[min/avg/p95/max]=0.97/4.06/5.47/10.24 | raster[min/avg/p95/max]=0.16/0.50/0.67/0.94 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=618 | jank=0 (0.00%) | build[min/avg/p95/max]=0.97/3.98/5.29/9.61 | raster[min/avg/p95/max]=0.15/0.50/0.67/0.98 | hz=60.0 | budget=16.67ms | window=10.51s
        ```
    - shrinkWrap: false
      - ```
        flutter: [PERF] frames=620 | jank=0 (0.00%) | build[min/avg/p95/max]=0.86/3.98/5.30/14.31 | raster[min/avg/p95/max]=0.15/0.50/0.68/0.86 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=622 | jank=0 (0.00%) | build[min/avg/p95/max]=0.83/4.00/5.26/12.27 | raster[min/avg/p95/max]=0.14/0.51/0.72/0.90 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=623 | jank=0 (0.00%) | build[min/avg/p95/max]=1.06/3.93/5.26/12.10 | raster[min/avg/p95/max]=0.15/0.49/0.66/0.83 | hz=60.0 | budget=16.67ms | window=10.51s
        ```
  - 요소 1000개
    - shrinkWrap: true
      - ```
        flutter: [PERF] frames=616 | jank=0 (0.00%) | build[min/avg/p95/max]=0.86/4.18/5.71/25.89 | raster[min/avg/p95/max]=0.15/0.40/0.59/0.98 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=623 | jank=0 (0.00%) | build[min/avg/p95/max]=0.82/4.28/5.91/21.88 | raster[min/avg/p95/max]=0.13/0.40/0.60/0.82 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=616 | jank=0 (0.00%) | build[min/avg/p95/max]=0.95/4.23/5.85/23.99 | raster[min/avg/p95/max]=0.15/0.39/0.58/0.92 | hz=60.0 | budget=16.67ms | window=10.51s
        ```
    - shrinkWrap: false
      - ```
        flutter: [PERF] frames=623 | jank=0 (0.00%) | build[min/avg/p95/max]=0.85/4.23/5.88/20.83 | raster[min/avg/p95/max]=0.14/0.40/0.59/0.81 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=615 | jank=0 (0.00%) | build[min/avg/p95/max]=0.94/4.15/5.73/23.62 | raster[min/avg/p95/max]=0.14/0.39/0.60/0.92 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=617 | jank=0 (0.00%) | build[min/avg/p95/max]=0.83/4.23/5.95/22.80 | raster[min/avg/p95/max]=0.15/0.40/0.59/0.94 | hz=60.0 | budget=16.67ms | window=10.52s
        ```
  - 요소 5000개
    - shrinkWrap: true
      - ```
        flutter: [PERF] frames=615 | jank=0 (0.00%) | build[min/avg/p95/max]=0.83/5.01/6.01/40.91 | raster[min/avg/p95/max]=0.14/0.30/0.38/0.73 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=613 | jank=0 (0.00%) | build[min/avg/p95/max]=0.91/4.68/6.42/47.21 | raster[min/avg/p95/max]=0.16/0.29/0.37/0.88 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=610 | jank=0 (0.00%) | build[min/avg/p95/max]=0.94/4.74/6.25/46.61 | raster[min/avg/p95/max]=0.14/0.29/0.38/0.89 | hz=60.0 | budget=16.67ms | window=10.51s
        ```
    - shrinkWrap: false
      - ```
        flutter: [PERF] frames=607 | jank=0 (0.00%) | build[min/avg/p95/max]=0.94/4.71/6.27/46.48 | raster[min/avg/p95/max]=0.14/0.29/0.38/0.84 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=616 | jank=0 (0.00%) | build[min/avg/p95/max]=1.00/5.12/6.08/52.70 | raster[min/avg/p95/max]=0.16/0.31/0.39/0.81 | hz=60.0 | budget=16.67ms | window=10.51s
        flutter: [PERF] frames=609 | jank=0 (0.00%) | build[min/avg/p95/max]=0.89/5.24/6.08/54.89 | raster[min/avg/p95/max]=0.13/0.31/0.40/0.92 | hz=60.0 | budget=16.67ms | window=10.51s
        ```

# 스냅샷(표/그림/코드/데모 등, 설명 한 줄)
## 1) 화면에 처음 빌드했을 때
| 요소 수 | shrinkWrap | frames(평균) | build[min/avg/p95/max] (ms) | raster[min/avg/p95/max] (ms) |
|---:|:---:|---:|:---:|:---:|
| 10 | true | 24.33 | 0.38/2.32/5.79/6.17 | 0.09/0.34/0.56/0.60 |
| 10 | false | 24.67 | 0.34/2.25/5.98/6.72 | 0.08/0.33/0.58/0.61 |
| 100 | true | 24.00 | 0.46/2.56/5.36/6.47 | 0.11/0.38/0.61/0.63 |
| 100 | false | 24.33 | 0.37/2.38/5.28/6.14 | 0.09/0.35/0.58/0.62 |
| 1000 | true | 24.67 | 0.36/2.23/6.00/6.42 | 0.09/0.32/0.54/0.58 |
| 1000 | false | 25.00 | 0.34/2.23/5.69/6.45 | 0.09/0.33/0.56/0.62 |

## 2) 스크롤 시 (자동 스크롤 ~10.5초, 60Hz, budget=16.67ms)
| 요소 수 | shrinkWrap | frames(평균) | build[min/avg/p95/max] (ms) | raster[min/avg/p95/max] (ms) |
|---:|:---:|---:|:---:|:---:|
| 100 | true | 620.33 | 0.98/4.03/5.41/10.00 | 0.15/0.50/0.68/0.94 |
| 100 | false | 621.67 | 0.92/3.97/5.27/12.89 | 0.15/0.50/0.69/0.86 |
| 1000 | true | 618.33 | 0.88/4.23/5.82/23.92 | 0.14/0.40/0.59/0.91 |
| 1000 | false | 618.33 | 0.87/4.20/5.85/22.42 | 0.14/0.40/0.59/0.89 |
| 5000 | true | 612.67 | 0.89/4.81/6.23/44.91 | 0.15/0.29/0.38/0.83 |
| 5000 | false | 610.67 | 0.94/5.02/6.14/51.36 | 0.14/0.30/0.39/0.86 |

# 문제·수정·배운 점
- 예상했던것과 달리 그냥 기본 화면(scaffold body)에서 진행한 실험은 shrinkWrap: true가 효율성에 악영향을 끼치지 않고, 오히려 성능이 더 좋아 보이기도 했다. 그렇다면 shrinkWrap이 일반적인 상황에서는 크게 문제가 되지 않는 것 처럼 보인다.
- 효율성에 악영향을 끼치는 상황을 찾아보고 그 상황에서 실험을 다시 진행해볼 필요가 있어보인다.



## AI 리뷰(답변)
- 이번 실험 환경(Scaffold body의 단일 스크롤뷰, tight constraints)에서는 shrinkWrap의 추가 비용이 거의 드러나지 않아 두 설정이 유사한 성능을 보인 것이 자연스럽습니다. 데이터상 모든 케이스에서 jank=0, p95 build≈5~6ms로 여유가 있습니다.
- 다만 이 결과를 일반화하기는 이릅니다. shrinkWrap의 진짜 비용은 부모가 스크롤/무한 축일 때 발생합니다. 예) SingleChildScrollView + Column + ListView(shrinkWrap:true, NeverScrollableScrollPhysics) 또는 중첩 Sliver 구조 — 이 경우 크기 결정을 위해 끝까지 레이아웃해야 해서 O(n) 계산·메모리 부담이 커질 수 있습니다.
- 실무 팁: 전면 리스트는 기본값(shrinkWrap:false) 유지가 안전합니다. 공간 수축이 필요하면 Expanded/Sliver로 해결하고, 부득이하게 shrinkWrap:true를 쓸 땐 itemExtent(또는 prototypeItem)로 레이아웃 비용을 제한하세요.
- 결론: “일반적으로 문제없다”는 판단은 이르다. 비용이 드러나는 구조를 겨냥해 재검증이 필요합니다.
