# 개념

사용자가 Application을 켜고, 끄고, 멈추고, 재개하는 동작속에서 Activity는 각각의 상황에 맞는 상태를 갖도록 설계되어 있다. 그리고 이러한 상태들이 어떻게 연계되고 동작하는지를 표현한것이 Activity life-cycle이다.

![image.png](attachment:879b206e-93db-4a7a-83b4-82c2d25400a4:image.png)

# Callback

Activity의 상태 변경에 따라 호출되는 Callback 함수들이 있다.

### onCreate

- Activity 가 처음 만들어질 때 단 1회 호출된다
- 주로 레이아웃 지정 작업을 처리한다.
- 주로 viewmodel 연결, 멤버 변수 초기화, 리스트 바인딩 등을 처리한다.
- 주로 저장된 상태 복원 작업을 처리한다.
- Bundle에는 이전 인스턴스 스냅샷 정보가 담겨있다.

### onStart

- 활동이 시작됨 상태가 되면 호출된다.
- ui 유지 갱신에 필요한 간단한 작업들을 처리한다.(뭐가있지?)
- 상태가 끝나면 곧바로 onResume으로 넘어간다.

### onResume

- Activity가 foreground에서 활동이 시작되었을때 호출된다.
- 사용자와 상호작용하는 동안 처리되어야 할 작업들을 이곳에서 시작한다.
    - 애니메이션 재생?
    - BLE 스캔 시작 등등?
- 활동 중단이 되면 onPause으로 넘어간다.

### onPause

- Activity가 사용자의 포커스를 잃었을때 호출된다.
    - 하지만 pause 상태가 무조건 중지를 의미하는것은 아니다.
        - 앞에 다이얼로그가 띄워졌거나 하는 경우
- 이 상태는 아주 짧게 유지됨으로 무거운 작업은 금지된다. → onStop에서 처리하도록 한다.
- Animation 작업 중지 같이 가볍고 짧은 작업을 처리해주면 될 듯 싶다.

### onStop

- 액티비티가 사용자에게 보이지 않을때 호출된다.
- 보통 이 상태에서는 상대적으로 무거운 작업을 수행한다.
    - 데이터 저장
    - 네트워크 호출
    - DB 트랜잭션
- stop 되어도 메모리에 정보가 담겨있으니 다시 restart되어도 전부 다시 만들어줄 필요가 없다.

### onDestroy

- Activity가 소멸되기 전에 호출된다.
- Activity를 사용하기 위해 선언된 모든것을 초기화하는 작업을 수행한다.

### +alpha

- onStart에서 선언된것은 onStop에서 해제하면 될 듯 하다.
    - restart되면 어차피 다시 start가 실행될테니…
- onResume에서 선언된것은 onPause에서 해제하면 될 듯 하다.
    - pause↔resume은 상황에 따라 서로 계속 왔다갔다 할테니…
- 만약 데이터 캐싱작업이 필요하다면 onstart와 onstop에서 처리하는것이 괜찮아 보인다.
    - but, onStop 부분은 Activity의 내용이 살아있지 않을 가능성이 높으니 UI 관련된 데이터들은 주기적으로 그리고 웬만하면 onPause에서 저장하는것이 좋아보인다.(ui 관련 캐싱 데이터는 크기가 크지 않을것이니)
        - 보통 이런 작업은 bundle에 해줄거고 bundle에 저장하라는 명령 호출은 개발자가 직접 하는 경우는 없으니 크게 신경쓸 일은 없겠지만 그래도 유의해야겠다.
