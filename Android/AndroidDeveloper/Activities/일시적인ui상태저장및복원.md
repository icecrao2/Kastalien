사용자는 화면 회전/멀티 윈도우 상황에서 ui가 유지되길 바라지만 실제 시스템은 그렇지 않다.

또한 Stop 상태로 유지된 화면은 메모리 부족으로 인해 process가 제거되어 상태가 유지되지 못할 수도 있다.

그래서 상태를 기억하고 불러올 수 있는 방법을 도입해야한다.

## 일시적인 데이터 저장 도구

- ViewModel
    - 화면 회전 같은 상황에서는 살아남음
    - 프로세스 사망시에는 살아남지 못함(완전한 방법 x)
- onSaveInstanceState(Bundle)
    - 작고 가벼운 ui 상태를 저장하기 좋다.
    - 프로세스 사망시에도 살아 있음
    - 번들 직렬화/역직렬화 비용이 있고 용량 제한이 있어 가벼운 값만.
- 로컬 저장소(Room/Preference)
    - 크고 무거운 중요 데이터를 저장하기 좋다.
    - 앱 세션을 넘어서 살아야하는 데이터를 저장하는데 필요하다.
- 의견
    - viewmodel은 런타임 캐시
    - onSaveInstanceState 가벼운 ui 요소
    - 무거운건 전부 로컬저장소

### +alpha

- ViewModel
    - ViewModel은 Activity 인스턴스 소멸시에도 살아남지만 Activity 인스턴스 프로세스 킬에는 소멸된다.
- Bundle
    - Bundle은 Activity 인스턴스 소멸시에도 살아남고 Activity 인스턴스 프로세스 킬에도 살아남는다
        - 이는 Bundle이 앱에서 관리되는것이 아니라 OS의 AMS(Activity Management System)에서 관리되기 때문이다.
        - Bundle이 이렇게 설계된 이유는 앱이 오랫동안 사용 중지 되었을때 백그라운드에 존재하는것처럼 보이지만 사실 프로세스는 킬 당한 상태이기 때문에 사용자가 다시 앱을 불러왔을때 조금이라도 더 빠르게 불러올 수 있도록 하기 위함으로 보인다.
    - Bundle 의 onSaveInstanceState 는 우리가 직접 호출하지 않고 앱과 OS가 알아서 호출해준다. 우리는 그저 무엇을 저장하고 불러올지에 대한 확장만 시켜주면 된다.
        - 보통 onPause에서 onStop으로 넘어가기 전에 호출될 것으로 보인다.
            - onStop은 Activity가 사라진 지점이기 때문에 Bundle에 저장할 수 있는 정보가 거의 없어 부적합하기 때문
            - 캐싱의 역할을 하기 위해서는 구동중이 아닌 꺼지기 전에 저장하는것이 좋기 때문에 onPause~onStop 사이 어디쯤에서 실행되지 않을까 추측해본다.
- Local Storage
    - 영속하다
